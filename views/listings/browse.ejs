<!DOCTYPE html>
<html lang="en">
  <%- include('../partials/head') %>

  <body>
    <%- include('../partials/header') %>

    <div class="browse-container">
      <!-- Sidebar for filters -->
      <div class="sidebar">
        <h3>Category</h3>
        <div class="filter-group">
          <label>
            <input
              type="radio"
              name="category"
              value="books"
                onchange="window.location.href='?category=books<%= search ? `&search=${encodeURIComponent(search)}` : '' %>'"
              <%= category === 'books' ? 'checked' : '' %>
            />
            Books
          </label>
          <label>
            <input
              type="radio"
              name="category"
              value="dorm"
              onchange="window.location.href='?category=dorm<%= search ? `&search=${encodeURIComponent(search)}` : '' %>'"
              <%= category === 'dorm' ? 'checked' : '' %>
            />
            Dorm Essentials
          </label>
          <label>
            <input
              type="radio"
              name="category"
              value="electronics"
              onchange="window.location.href='?category=electronics<%= search ? `&search=${encodeURIComponent(search)}` : '' %>'"
              <%= category === 'electronics' ? 'checked' : '' %>
            />
            Electronics
          </label>
          <label>
            <input
              type="radio"
              name="category"
              value=""
              onchange="window.location.href='?<%= search ? `search=${encodeURIComponent(search)}` : '' %>'"
              <%= !category ? 'checked' : '' %>
            />
            All Categories
          </label>
        </div>

        <h3>Price</h3>
        <div class="filter-group">
          <input type="range" min="0" max="100" />
          <div class="price-range">
            <span>Asking Price: $0</span>
            <span>$100</span>
          </div>
        </div>
      </div>

      <!-- Product Listing -->
      <div class="products-container">
        <div class="sort-buttons">
          <a href="?sort=new<%= search ? `&search=${encodeURIComponent(search)}` : '' %>" class="<%= sort === 'new' ? 'active' : '' %>">Newest</a>
          <a href="?sort=old<%= search ? `&search=${encodeURIComponent(search)}` : '' %>" class="<%= sort === 'old' ? 'active' : '' %>">Oldest</a>
          <a href="?sort=priceAsc<%= search ? `&search=${encodeURIComponent(search)}` : '' %>" class="<%= sort === 'priceAsc' ? 'active' : '' %>">Price Ascending</a>
          <a href="?sort=priceDesc<%= search ? `&search=${encodeURIComponent(search)}` : '' %>" class="<%= sort === 'priceDesc' ? 'active' : '' %>">Price Descending</a>
        </div>

        <div class="product-grid">
          <% if (listings.length) { %> <% listings.forEach(listing => { %>
          <div class="product-card">
            <img src="<%= listing.image %>" alt="<%= listing.name %>" />
            <p><a href="/listings/details/<%= listing.id %>"><%= listing.name %></a></p>
            <p class="price">Asking Price: $<%= listing.price %></p>
          </div>
          <% }) %> <% } else { %>
          <p>There are no listings to display.</p>
          <% } %>
        </div>
      </div>
    </div>

    <%- include('../partials/footer') %>
  </body>
</html>
